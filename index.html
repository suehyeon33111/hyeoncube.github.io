<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>수현의 큐브사이트</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    background:#111;
    color:white;
    font-family:Arial,sans-serif;
    text-align:center;
}
h1{
    margin:0;
    padding:10px;
    border-bottom:2px solid #333;
}
#timer{
    font-size:80px;
    margin-top:40px;
    user-select:none;
}
.ready{color:red;}
#scramble{
    margin-top:15px;
    opacity:.9;
}
#records{
    max-width:300px;
    margin:20px auto;
    text-align:left;
    font-family:monospace;
}
button{
    width:300px;
    padding:6px;
    background:#222;
    color:white;
    border:1px solid #444;
    cursor:pointer;
}
</style>
</head>

<body>

<h1>수현의 큐브사이트</h1>

<div id="timer">0.000</div>
<div id="scramble"></div>

<div id="records">
    <b>기록</b>
    <ul id="list"></ul>
</div>

<button onclick="clearRecords()">기록 초기화</button>

<script>
/* 상태 */
let running=false,holding=false,startTime,interval;
let records=JSON.parse(localStorage.getItem("records")||"[]");

const timer=document.getElementById("timer");
const scrambleDiv=document.getElementById("scramble");
const list=document.getElementById("list");

/* 스크램블 */
function scramble(){
    const m=["R","L","U","D","F","B"];
    const s=["","'","2"];
    let out=[],last="";
    for(let i=0;i<20;i++){
        let c;
        do{c=m[Math.floor(Math.random()*6)]}while(c===last);
        last=c;
        out.push(c+s[Math.floor(Math.random()*3)]);
    }
    scrambleDiv.textContent=out.join(" ");
}
scramble();

/* 기록 */
function draw(){
    list.innerHTML="";
    records.forEach(t=>{
        const li=document.createElement("li");
        li.textContent=t.toFixed(3);
        list.appendChild(li);
    });
}
draw();

function save(t){
    records.unshift(t);
    localStorage.setItem("records",JSON.stringify(records));
    draw();
}

function clearRecords(){
    records=[];
    localStorage.removeItem("records");
    draw();
}

/* 타이머 */
window.addEventListener("keydown",e=>{
    if(e.code==="Space"){
        e.preventDefault();
        if(!running){
            holding=true;
            timer.classList.add("ready");
        }
    }
});
window.addEventListener("keyup",e=>{
    if(e.code==="Space"){
        e.preventDefault();
        if(holding && !running){
            holding=false;
            timer.classList.remove("ready");
            startTime=Date.now();
            interval=setInterval(()=>{
                timer.textContent=((Date.now()-startTime)/1000).toFixed(3);
            },10);
            running=true;
        }else if(running){
            clearInterval(interval);
            running=false;
            save(parseFloat(timer.textContent));
            scramble();
        }
    }
});
</script>

</body>
</html>
