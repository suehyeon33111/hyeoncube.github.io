<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>수현의 큐브사이트</title>

<style>
body{
    margin:0;
    background:#111;
    color:white;
    font-family:Arial,sans-serif;
    text-align:center;
}
h1{
    margin:0;
    padding:10px;
    border-bottom:2px solid #333;
    position:relative;
}
#settings{
    position:absolute;
    right:10px;
    top:10px;
}
select{
    background:#222;
    color:white;
    border:1px solid #444;
    padding:4px;
}
#timer{
    font-size:80px;
    margin-top:40px;
    user-select:none;
}
.ready{color:red;}
#scramble{
    margin-top:15px;
    opacity:.9;
}
#records{
    max-width:320px;
    margin:20px auto;
    text-align:left;
    font-family:monospace;
}
li{
    list-style:none;
    border-bottom:1px solid #222;
    padding:2px 0;
}
button{
    width:320px;
    padding:6px;
    background:#222;
    color:white;
    border:1px solid #444;
    cursor:pointer;
}
</style>
</head>

<body>

<h1>
수현의 큐브사이트
<div id="settings">
<select id="cubeType">
    <option value="222">2×2</option>
    <option value="333" selected>3×3</option>
    <option value="444">4×4</option>
    <option value="555">5×5</option>
</select>
</div>
</h1>

<div id="timer">0.000</div>
<div id="scramble"></div>

<div id="records">
    <b>기록</b>
    <ul id="list"></ul>
</div>

<button id="clearBtn">기록 초기화</button>

<script>
/* ===== 상태 ===== */
let running=false,holding=false,startTime,interval;
let cubeType=document.getElementById("cubeType").value;
let records=JSON.parse(localStorage.getItem("records")||"[]");

/* ===== 요소 ===== */
const timer=document.getElementById("timer");
const scrambleDiv=document.getElementById("scramble");
const list=document.getElementById("list");

/* ===== 스크램블 ===== */
function rand(moves,len){
    const suf=["","'","2"];
    let out=[],last="";
    for(let i=0;i<len;i++){
        let m;
        do{m=moves[Math.floor(Math.random()*moves.length)]}while(m===last);
        last=m;
        out.push(m+suf[Math.floor(Math.random()*3)]);
    }
    return out.join(" ");
}
function genScramble(){
    if(cubeType==="222") scrambleDiv.textContent=rand(["R","U","F"],9);
    else if(cubeType==="333") scrambleDiv.textContent=rand(["R","L","U","D","F","B"],20);
    else scrambleDiv.textContent=rand(["R","L","U","D","F","B","Rw","Uw"],40);
}
genScramble();

/* ===== 기록 ===== */
function draw(){
    list.innerHTML="";
    records.forEach(t=>{
        const li=document.createElement("li");
        li.textContent=t.toFixed(3);
        list.appendChild(li);
    });
}
draw();

function save(t){
    records.unshift(t);
    localStorage.setItem("records",JSON.stringify(records));
    draw();
}

/* 기록 초기화 */
document.getElementById("clearBtn").onclick=()=>{
    records=[];
    localStorage.removeItem("records");
    draw();
};

/* ===== 설정 ===== */
document.getElementById("cubeType").onchange=e=>{
    cubeType=e.target.value;
    genScramble();
};

/* ===== 타이머 ===== */
window.addEventListener("keydown",e=>{
    if(e.code==="Space"){
        e.preventDefault();
        if(!running){
            holding=true;
            timer.classList.add("ready");
        }
    }
});
window.addEventListener("keyup",e=>{
    if(e.code==="Space"){
        e.preventDefault();
        if(holding && !running){
            holding=false;
            timer.classList.remove("ready");
            startTime=Date.now();
            interval=setInterval(()=>{
                timer.textContent=((Date.now()-startTime)/1000).toFixed(3);
            },10);
            running=true;
        }else if(running){
            clearInterval(interval);
            running=false;
            save(parseFloat(timer.textContent));
            genScramble();
        }
    }
});
</script>

</body>
</html>
